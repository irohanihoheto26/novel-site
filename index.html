<!DOCTYPE html>
<html lang="ja" translate="no">
<head><meta charset="UTF-8"><title>Test</title></head>
<body>
  <button id="btn" style="padding:20px">ここをクリック</button>
  <p id="msg">待機中...</p>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // URLとKEYの前後からスペースを完全に除去して定義
    const u = 'https://fnobmngpstzolphexluc.supabase.co'.replace(/\s/g,'');
    const k = 'sb_publishable_wczOfUdvKuScZQJ0Lklx0w_D9XtJPqE'.replace(/\s/g,'');
    
    const client = window.supabase.createClient(u, k);

    document.getElementById('btn').onclick = async () => {
      document.getElementById('msg').innerText = "通信中...";
      const { error } = await client.auth.getUser();
      if (error) {
        document.getElementById('msg').innerText = "失敗: " + error.message;
      } else {
        document.getElementById('msg').innerText = "★大成功！★";
        alert("接続成功しました！");
      }
    };
  </script>
</body>
</html>
